// @license      MIT License
!function(){"use strict";toastr.options={positionClass:"toast-bottom-right"};let t=document.createEvent("HTMLEvents"),e=document.getElementsByTagName("head")[0];const n='<a class="auto_sell_button item_market_action_button item_market_action_button_green" href="#"><span class="item_market_action_button_edge item_market_action_button_left"></span><span class="item_market_action_button_contents">AutoSell</span><span class="item_market_action_button_edge item_market_action_button_right"></span><span class="item_market_action_button_preload"></span></a>';function o(){let t=document.querySelector("#iteminfo0_item_market_actions > a.item_market_action_button"),e=document.querySelector("#iteminfo1_item_market_actions > a.item_market_action_button"),o=document.querySelector("#iteminfo0_item_descriptors > div"),i=document.querySelector("#iteminfo1_item_descriptors > div"),r=document.querySelector("#iteminfo0_scrap_content"),a=document.querySelector("#iteminfo1_scrap_content");if(null!=t&&null==document.querySelector("#iteminfo0_item_market_actions > a.auto_sell_button")&&(t.outerHTML=t.outerHTML+n),null!=e&&null==document.querySelector("#iteminfo1_item_market_actions > a.auto_sell_button")&&(e.outerHTML=e.outerHTML+n),null!=o){let t=o.textContent;t.length>100&&(o.textContent=t.substring(0,100)+"... [shortened]")}if(null!=i){let t=i.textContent;t.length>100&&(i.textContent=t.substring(0,100)+"... [shortened]")}null!=r&&r.remove(),null!=a&&a.remove()}function i(t){return new Promise((e=>setTimeout(e,t)))}e.innerHTML='<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css"><style>.item_market_actions .item_market_action_button_edge.item_market_action_button_right{margin-right:10px;}</style>'+e.innerHTML,t.initEvent("keyup",!1,!0),$(document).on("click",".auto_sell_button",(async function(e){e.preventDefault();let n=e.path[4].querySelector(".item_desc_content > .item_desc_description > h1").textContent,o=e.path[2].querySelector(".item_market_actions > div > div:nth-child(2)").innerHTML;SellCurrentSelection();let r=o.search("<br>"),a=Number(o.substring(0,r).replace(/[^0-9.-]+/g,""));if(isNaN(a))return void toastr.error("No lots to compare!");let l=function(t){let e=t.toString();if(e.indexOf("e-")>-1){let[t,n]=e.split("e-");return parseInt(n,10)}return Math.floor(t)!==t&&t.toString().split(".")[1].length||0}(a),_=10**-l,c=a<4*_?3*_:(a-_).toFixed(l);for(document.getElementById("market_sell_buyercurrency_input").value=c,$("market_sell_buyercurrency_input").dispatchEvent(t),document.getElementById("market_sell_dialog_accept_ssa").checked=!0,$("market_sell_dialog_accept").click(),$("market_sell_dialog_ok").click();null==document.querySelector(".newmodal .newmodal_buttons .btn_grey_steamui");)await i(100);document.querySelector(".newmodal .newmodal_buttons .btn_grey_steamui").click(),toastr.success(c+" "+n)})),$(document).on("click",".inventory_page div.item",o),$(document).on("click",".games_list_tabs a.games_list_tab",o)}();
